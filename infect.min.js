// infect.js v0.1.0 (2013-11-11) //
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.infect=b()}(this,function(){function a(a){return a=Object.prototype.toString.call(a),a.match(/ (.*)]/)[1].toLowerCase()}function b(b){var c,d=Array.prototype.slice.call(arguments,1),e="";for(c=0;c<d.length;c++)e+=e.legnth>0?", "+a(d[c]):a(d[c]);throw i+"Invalid function parameters infect."+b+"("+e+")"}function c(c,d){"string"===a(c)&&"undefined"!==a(d)&&d instanceof Object?(c=0===c.indexOf(h)?c.substr(h.length):c,g[c]=d):b("set",c,d)}function d(c){return"string"===a(c)?(c=0===c.indexOf(h)?c.substr(h.length):c,g[c]||void 0):(b("get",c),void 0)}function e(c,e){var f,g;if("Object"===a(c)&&e instanceof Array){for(g=e.length;g--;){if(f=e[g],f=0===f.indexOf(h)?f.substr(h.length):f,"string"!==a(f))throw i+" Keys must be strings";if(c[h+f]=d(f),void 0===c[h+f])throw i+"Could not inject "+f}return c}b("obj",c,e)}function f(c,e){var f,g,j,k;if("function"===a(c)){for(e=e||{},j=/\(([^)]+)/.exec(c.toString())[1],j&&(j=j.split(/\s*,\s*/)),f=k=j.length;f--;){if(g=j[f],0!==g.indexOf(h)){j=j.slice(f+1);break}j[f]=d(g)}return function(){for(var a=Array.prototype.slice.call(arguments),b=a.length+j.length;k>b;b++)a.push(void 0);if(b>k)throw i+"Too many parameters! I expected <= "+(k-j.length)+" but got "+a.length;a=a.concat(j),c.apply(e,a)}}b("func",c,e)}var g={},h="$",i=" :: infect.js => ";return{set:c,get:d,obj:e,object:e,func:f,"function":f,funk:f}});